{%extends 'index.html'%}
{%block mainpanel%}
<nav class="sidebar sidebar-offcanvas" id="sidebar">
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link" href="{% url 'ind' %}">
        <i class="mdi mdi-home-variant  menu-icon"></i>
        <span class="menu-title">Home</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
        <i class="icon-layout menu-icon"></i>
        <span class="menu-title">Masters</span>
        <i class="menu-arrow"></i>
      </a>
      <div class="collapse" id="ui-basic">
        <ul class="nav flex-column sub-menu">
          <li class="nav-item"> <a class="nav-link" href="{% url 'list' %}">Employees</a></li>
          <li class="nav-item"> <a class="nav-link" href="{% url 'master' %}">Masters</a></li>
          <li class="nav-item"> <a class="nav-link" href="{% url 'thought' %}">Thoughts</a></li>
        </ul>
      </div>
    </li>
    <li class="nav-item active">
      <a class="nav-link" data-toggle="collapse" href="#ui-basic1" aria-expanded="false" aria-controls="ui-basic">
        <i class="icon-layout menu-icon"></i>
        <span class="menu-title">Meetings</span>
        <i class="menu-arrow"></i>
      </a>
      <div class="collapse" id="ui-basic1">
        <ul class="nav flex-column sub-menu">
          <li class="nav-item"> <a class="nav-link" href="{% url 'strat' %}">Strategy</a></li>
          <li class="nav-item"> <a class="nav-link" href="{% url 'opera' %}">Operations</a></li>
        </ul>
      </div>
    </li>
  </ul>
</nav>
<!-- partial -->
<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Task Report</h4>
            {%if pid %}
            <form method="post">
              <!-- <div class="form-group row ">

                {% csrf_token %}
                <label class="col-1 col-form-label">From</label>
                <div class="col-3">
                  <input type="date" class="form-control" name="from" placeholder="dd/mm/yyyy" />
                </div>
                <label class="col-1 col-form-label">To</label>
                <div class="col-3">
                  <input type="date" class="form-control" name="to" placeholder="dd/mm/yyyy" />
                </div>
                <div class="col-3">
                  <button type="submit" class="btn btn-warning">Apply</button>
                </div>
              </div> -->


              <!-- <p class="card-description">
                    Add class <code >.table</code>
                  </p> -->

              <div class="accordion  table-responsive" id="accordionExample">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>ID No.</th>
                      <th>Total tasks</th>
                      <th>Completed tasks</th>
                      <th>Not Completed tasks</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>{{emp.id}}</td>
                      <td>{{emp.name}}</td>
                      <td><label class="badge badge-primary">{{emp.task}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq" aria-expanded="true" aria-controls="collapseOneq">Total</button>
                        {%endif%}
                      </td>
                      <td><label class="badge badge-success">{{emp.completed}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq2" aria-expanded="true"
                          aria-controls="collapseOneq">Completed</button>
                        {%endif%}
                      </td>
                      <td><label class="badge badge-danger">{{emp.progress}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq1" aria-expanded="true"
                          aria-controls="collapseOneq">Pending</button>
                        {%endif%}
                      </td>
                      <!-- <td><input type="radio" name="user" value="{{emp.id}}"></td> -->
                      {% if pud %}
                      <!-- <td><button class="btn btn-primary d-flex ml-auto" onclick="exportTableToExcel('tblData','{{emp.name}}')">Save as .xls
                        file</button></td> -->
                      <td><a href="{% url 'download_file' filename='report.xlsx' %}"
                          class="btn btn-primary d-flex ml-auto">Saveas .xlsfile</a></td>
                      {%endif%}
                    </tr>
                  </tbody>
                </table>
            </form>
            {%endif%}
            {%if sid %}
            <form method="post">
              <!-- <div class="form-group row ">

                {% csrf_token %}
                <label class="col-1 col-form-label">From</label>
                <div class="col-3">
                  <input type="date" class="form-control" name="from" placeholder="dd/mm/yyyy" />
                </div>
                <label class="col-1 col-form-label">To</label>
                <div class="col-3">
                  <input type="date" class="form-control" name="to" placeholder="dd/mm/yyyy" />
                </div>
                <div class="col-3">
                  <button type="submit" class="btn btn-warning">Apply</button>
                </div>
              </div> -->


              <!-- <p class="card-description">
                    Add class <code >.table</code>
                  </p> -->

              <div class="accordion  table-responsive" id="accordionExample">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>ID No.</th>
                      <th>Total tasks</th>
                      <th>Completed tasks</th>
                      <th>Not Completed tasks</th>
                      <th>pick</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>{{emp.id}}</td>
                      <td>{{emp.name}}</td>
                      <td><label class="badge badge-primary">{{emp.task}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq" aria-expanded="true" aria-controls="collapseOneq">Total</button>
                        {%endif%}
                      </td>
                      <td><label class="badge badge-success">{{emp.completed}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq2" aria-expanded="true"
                          aria-controls="collapseOneq">Completed</button>
                        {%endif%}
                      </td>
                      <td><label class="badge badge-danger">{{emp.progress}}</label>
                        {%if pid %}
                        <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
                          data-target="#collapseOneq1" aria-expanded="true"
                          aria-controls="collapseOneq">Pending</button>
                        {%endif%}
                      </td>
                      <td><input type="radio" name="user" value="{{emp.id}}"></td>
                      {% if pud %}
                      <!-- <td><button class="btn btn-primary d-flex ml-auto" onclick="exportTableToExcel('tblData','{{emp.name}}')">Save as .xls
                        file</button></td> -->
                      <td><a href="{% url 'download_file' filename='report.xlsx' %}"
                          class="btn btn-primary d-flex ml-auto">Saveas .xlsfile</a></td>
                      {%endif%}
                    </tr>
                  </tbody>
                </table>
            </form>
            {%endif%}
            <div id="collapseOneq" class="collapse" aria-labelledby="headingOneq" data-parent="#accordionExample">
              <div class="card-body">
                <h3 class="p-3">Total Tasks</h3>
                <table class="table css-serial" id="tblData">
                  <!-- < class="border"> -->
                  <form method="POST">
                    {% csrf_token %}
                    <th>#</th>
                    <th>Start date</th>
                    <th>Job Name</th>
                    <th>Task</th>
                    <th>Status</th>
                    <th>Remark</th>
                    </form>
                    <th></th>
                  </tr>
                  {%for job in jobs%}
                  <tr>
                    <td></td>
                    <td>{{job.date}}</td>
                    <td>{{job.job}}</td>
                    <td>{{job.tasks}}</td>
                    <td>{{job.status}}</td>
                    <td>{{job.remark}}</td>
                  </tr>
                  {%endfor%}
                </table>
              </div>
            </div>
            <div id="collapseOneq1" class="collapse" aria-labelledby="headingOneq" data-parent="#accordionExample">
              <div class="card-body">
                <h3 class="p-3">Pending Tasks</h3>
                <table class="table css-serial">
                  <tr class="border">
                    <th>#</th>
                    <th>Start date</th>
                    <th>Job Name</th>
                    <th>Task</th>
                    <th>Status</th>
                    <th>Remark</th>
                  </tr>
                  {%for job in jobs%}
                  {%if job.status == 'Not completed' %}
                  <tr>
                    <td></td>
                    <td>{{job.date}}</td>
                    <td>{{job.job}}</td>
                    <td>{{job.tasks}}</td>
                    <td>{{job.status}}</td>
                    <td>{{job.remark}}</td>
                  </tr>
                  {%endif%}
                  {%endfor%}
                </table>
              </div>
            </div>
            <div id="collapseOneq2" class="collapse" aria-labelledby="headingOneq" data-parent="#accordionExample">
              <div class="card-body">
                <h3 class="p-3">Completed Tasks</h3>
                <table class="table css-serial">
                  <thead>
                    <tr class="border">
                      <th>#</th>
                      <th>Start date</th>
                      <th>Job Name</th>
                      <th>Task</th>
                      <th>Status</th>
                      <th>Remark</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody class="border">

                    {%for job in jobs%}
                    {%if job.status == 'Completed' %}
                    <tr>
                      <td></td>
                      <td>{{job.date}}</td>
                      <td>{{job.job}}</td>
                      <td>{{job.tasks}}</td>
                      <td>{{job.status}}</td>
                      <td>{{job.remark}}</td>
                    </tr>
                    {%endif%}
                    {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
           {%endblock%}
        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer.html -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2021. Premium
              <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin template</a> from
              BootstrapDash.
              All rights reserved.</span>
            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i
                class="ti-heart text-danger ml-1"></i></span>
          </div>
        </footer>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
